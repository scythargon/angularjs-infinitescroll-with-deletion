/* ng-infinite-scroll - v1.0.0 - 2014-08-17 */
var mod;mod=angular.module("infinite-scroll",[]),mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(i,n,e){return{restrict:"A",scope:{infiniteScrollObjects:"=",infiniteScroll:"&",infiniteScrollVisibilityKey:"@"},link:function(t,l,o){var r,c,f,s,u,a;return n=angular.element(n),u=0,null!=o.infiniteScrollDistance&&t.$watch(o.infiniteScrollDistance,function(i){return u=parseInt(i,10)}),a=!0,r=!1,null!=o.infiniteScrollDisabled&&t.$watch(o.infiniteScrollDisabled,function(i){return a=!i,a&&r?(r=!1,c()):void 0}),s=function(){var i,n,e,l,o;for(l=t.infiniteScrollObjects,o=[],n=0,e=l.length;e>n;n++)i=l[n],o.push(i[t.infiniteScrollVisibilityKey]=!0);return o},f=function(){var i,n,e,o;for(o=t.infiniteScrollObjects.filter(function(i){return i[t.infiniteScrollVisibilityKey]===!0}),n=0,e=o.length;e>n;n++)i=o[n],l=$("#post_"+i.id),l.position().top+l.height()+500<window.pageYOffset&&(i[t.infiniteScrollVisibilityKey]=!1,window.scrollTo(0,window.pageYOffset-l.height()),console.log("#post_"+i.id+" is hidden now"))},c=function(){var e,o,c,s,h,d,S,p,$;if(f(),i.$$phase||t.$apply(),d=n.height()+n.scrollTop(),o=l.offset().top+l.height(),s=o-d,h=n.height()*u>=s,h&&a){for(e=t.infiniteScrollObjects.length,t.infiniteScroll(),$=t.infiniteScrollObjects.filter(function(i,n){return n>=e}),S=0,p=$.length;p>S;S++)c=$[S],c[t.infiniteScrollVisibilityKey]=!0;if(!i.$$phase)return t.$apply()}else if(h)return r=!0},s(),n.on("scroll",c),t.$on("$destroy",function(){return n.off("scroll",c)}),e(function(){return o.infiniteScrollImmediateCheck?t.$eval(o.infiniteScrollImmediateCheck)?c():void 0:c()},0)}}}]);